<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Robo Controler</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
			body {
				font-family: Monospace;
				background-color: #f0f0f0;
				margin: 0px;
				overflow: hidden;
			}
		</style>
	</head>
	<body>

		<div id="container"></div>
		<script src="bower_components/three.js/build/three.js"></script>

		<script src="bower_components/three.js/examples/js/controls/DragControls.js"></script>
		<script src="bower_components/three.js/examples/js/controls/OrbitControls.js"></script>
		<script src="bower_components/three.js/examples/js/controls/TransformControls.js"></script>

		<script src="bower_components/three.js/examples/js/libs/stats.min.js"></script>
		<script src="bower_components/three.js/examples/js/libs/dat.gui.min.js"></script>


		<script>

			console.log("Initialize");
			//
			// var dx = mouse.x - segment1.x,
			// 		dy = mouse.y - segment1.y,
			// 		dist = Math.sqrt(dx * dx + dy * dy),
			// 		a = 100,
			// 		b = 100,
			// 		c = Math.min(dist, a + b),
			// 		B = Math.acos((b * b - a * a - c * c) / (-2 * a * c)),
			// 		C = Math.acos((c * c - a * a - b * b) / (-2 * a * b)),
			// 		D = Math.atan2(dy, dx),
			// 		E = D + B + Math.PI + C;
			//
			//=====================================//
			// Machine Settings: (cm)

			var base_height 			= 			 5;
			var base_radius 			= 			 5;
			var base_offset 	  	= 		 2.5;

			var lowerArm_height		= 	 13.75;
			var lowerArm_radius		= 			 1.5;
			var lowerArm_offset		=			 2.2;

			var upperArm_height 	= 		14.9;
			var upperArm_radius		=				 5;

			//=====================================//

			var params = {
				uniform: true
			};

			init();
			animate();


			const Kinematics = require('js/libs/kinematics.js').default;

			const geometry = [
			// X   Y   Z
	      [1,  1,  0], // V0:
	      [0, 10,  0], // V1:
	      [5,  0,  0], // V2:
	      [3,  0,  0], // V3:
	      [0, -3,  0], // V4:
	    ]


			function init() {
				container = document.getElementById( 'container' );
				scene = new THREE.Scene();

				// set ceamera
				camera = new THREE.PerspectiveCamera( 3, window.innerWidth / window.innerHeight, 200, 10000 );
				camera.position.set( -500, 400, 800 );
				scene.add( camera );
				scene.add( new THREE.AmbientLight( 0xf0f0f0 ) );

				// draw grid
				var grid = new THREE.GridHelper( 100, 100 );
				grid.position.y = 0;
				grid.material.opacity = 0.25;
				grid.material.transparent = true;
				scene.add(grid);

				renderer = new THREE.WebGLRenderer( { antialias: true } );
				renderer.setClearColor( 0xf0f0f0 );
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				renderer.shadowMap.enabled = true;
				container.appendChild( renderer.domElement );

				// frames per second
				stats = new Stats();
				container.appendChild(stats.dom);

				// Orbit controle
				controls = new THREE.OrbitControls( camera, renderer.domElement );

				// make materal
				var line = new THREE.LineBasicMaterial({color: 0x0000ff,linewidth: 1});
				var material = new THREE.MeshNormalMaterial({shading: THREE.SmoothSHading});
				var faces = 50;
				var robotArm = new THREE.Mesh(base_Geometry, material);

				//=========================//
				//				 	BASE					 //
				//=========================//

				var base_Geometry = new THREE.CylinderGeometry(base_radius,base_radius,base_height, faces);
				var base_mesh = new THREE.Mesh(base_Geometry, material);
				base_mesh.position.set(0,base_height/2,0);
				robotArm.add(base_mesh);

				//=========================//
				//				LOWERARM				 //
				//=========================//

				var lowerArm_Geometry = new THREE.CylinderGeometry(lowerArm_radius,lowerArm_radius,lowerArm_height, faces);
				var lowerArm_mesh = new THREE.Mesh(lowerArm_Geometry, material);
				//lowerArm_mesh.rotateZ((90 * Math.PI)/180);
				base_mesh.add(lowerArm_mesh);

				scene.add(robotArm);
			}

			function animate() {
				requestAnimationFrame( animate );
				render();
				controls.update();
				stats.update();
			}
			function render() {
				renderer.render( scene, camera );
			}

		</script>

	</body>
</html>
